<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text RPG</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
            color: #333;
        }
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .game-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .game-text {
            margin-bottom: 20px;
        }
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .button-container button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .button-container button:hover {
            background-color: #0056b3;
        }
        .inventory {
            margin-top: 30px;
        }
        .inventory ul {
            list-style-type: none;
            padding: 0;
        }
        .inventory li {
            margin-bottom: 10px;
        }
        .stats {
            margin-top: 30px;
        }
        .stats table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .stats th, .stats td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .settings-button {
            margin-top: 20px;
        }
        .areas-menu {
            margin-top: 30px;
        }
        .areas-menu select {
            padding: 8px;
            font-size: 16px;
        }
        .city-menu {
            margin-top: 30px;
        }
        .city-menu select {
            padding: 8px;
            font-size: 16px;
        }
        .city-options {
            margin-top: 20px;
        }
        .magic-menu {
            margin-top: 30px;
        }
        .magic-menu button {
            padding: 8px 16px;
            font-size: 16px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            margin-right: 10px;
            margin-bottom: 10px;
            cursor: pointer;
        }
        .magic-menu button:hover {
            background-color: #495057;
        }
        .defense-menu {
            margin-top: 30px;
        }
        .defense-menu button {
            padding: 8px 16px;
            font-size: 16px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            margin-right: 10px;
            margin-bottom: 10px;
            cursor: pointer;
        }
        .defense-menu button:hover {
            background-color: #495057;
        }
        .settings-menu {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #fff;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            display: none; /* Initially hidden */
            z-index: 1000; /* Ensure it's above other content */
        }
        .settings-menu label {
            display: block;
            margin-bottom: 10px;
        }
        .settings-menu select {
            padding: 8px;
            font-size: 16px;
        }
        .save-button {
            margin-top: 20px;
        }
        .dark-mode {
            background-color: #333;
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-title">Text RPG</div>
        <div class="game-text" id="gameText">
            <!-- Game text dynamically updated here -->
            Welcome to the Text RPG! Begin your adventure...
        </div>
        <div class="button-container">
            <button onclick="explore()">Explore</button>
            <button onclick="startFight()">Fight</button>
            <button onclick="enterCity()">Enter City</button>
            <!-- Add more buttons for additional actions -->
        </div>
        <div class="inventory" id="inventory">
            <strong>Inventory:</strong>
            <ul id="inventoryList">
                <!-- Inventory items dynamically updated here -->
                <li>No items</li>
            </ul>
        </div>
        <div class="stats" id="stats">
            <strong>Stats:</strong>
            <table>
                <tr>
                    <th>Health</th>
                    <td id="health">100</td>
                </tr>
                <tr>
                    <th>Strength</th>
                    <td id="strength">10</td>
                </tr>
                <tr>
                    <th>Magic</th>
                    <td id="magic">5</td>
                </tr>
                <tr>
                    <th>Defense</th>
                    <td id="defense">5</td>
                </tr>
                <!-- Add more stats as needed -->
            </table>
        </div>
        <div class="settings-button">
            <button onclick="toggleSettings()">Settings</button>
        </div>
        <div class="areas-menu" id="areasMenu">
            <strong>Areas:</strong>
            <select id="areaSelect" onchange="changeArea()">
                <option value="1">Area 1 - Forest (Level 1-10)</option>
                <option value="2">Area 2 - Mountains (Level 10-20)</option>
                <option value="3">Area 3 - Caves (Level 20-30)</option>
                <option value="4">Area 4 - Desert (Level 30-40)</option>
                <option value="5">Area 5 - Swamp (Level 40-50)</option>
                <!-- Add more areas as needed -->
            </select>
        </div>
        <div class="city-menu" id="cityMenu" style="display:none;">
            <strong>City:</strong>
            <select id="citySelect" onchange="enterCity()">
                <option value="1">City of Eldoria</option>
                <!-- Add more cities as needed -->
            </select>
        </div>
        <div class="city-options" id="cityOptions" style="display:none;">
            <button onclick="sellLoot()">Sell Loot</button>
            <button onclick="buyItems()">Buy Items</button>
            <button onclick="learnSkills()">Learn Skills</button>
            <button onclick="exploreCity()">Explore City</button>
        </div>
        <div class="magic-menu" id="magicMenu">
            <strong>Magic:</strong><br>
            <button onclick="castSpell('Fire')">Fire Spell</button>
            <button onclick="castSpell('Ice')">Ice Spell</button>
            <!-- Add more magic buttons as needed -->
        </div>
        <div class="defense-menu" id="defenseMenu">
            <strong>Defense:</strong><br>
            <button onclick="useShield()">Use Shield</button>
            <!-- Add more defense buttons as needed -->
        </div>
        <div class="save-button">
            <button onclick="saveGame()">Save Game</button>
        </div>
    </div>

    <!-- Settings Menu -->
    <div class="settings-menu" id="settingsMenu">
        <strong>Settings:</strong>
        <div>
            <label><input type="checkbox" id="soundCheckbox"> Sound</label>
        </div>
        <div>
            <label>Text Size:
                <select id="textSizeSelect" onchange="changeTextSize()">
                    <option value="normal">Normal</option>
                    <option value="large">Large</option>
                </select>
            </label>
        </div>
        <div>
            <label><input type="checkbox" id="darkModeCheckbox" onchange="toggleDarkMode()"> Dark Mode</label>
        </div>
    </div>

    <script>
        // Initial game state
        var player = {
            name: "Player",
            health: 100,
            strength: 10,
            magic: 5,
            defense: 5,
            area: 1,  // Player starts in Area 1
            city: false,  // Not in city initially
            level: 1,
            traits: [],
            currentTrait: 0 // Index of current active trait
        };

        var areas = [
            { id: 1, name: "Forest", recommendedLevel: "1-10" },
            { id: 2, name: "Mountains", recommendedLevel: "10-20" },
            { id: 3, name: "Caves", recommendedLevel: "20-30" },
            { id: 4, name: "Desert", recommendedLevel: "30-40" },
            { id: 5, name: "Swamp", recommendedLevel: "40-50" }
            // Add more areas as needed
        ];

        var traits = [
            { name: "Trait 1", rarity: "common", buff: 5 },
            { name: "Trait 2", rarity: "rare", buff: 10 },
            { name: "Trait 3", rarity: "legendary", buff: 20, hexChance: 10 }
            // Add more traits with their buffs and rarity
        ];

        // Function to toggle dark mode
        function toggleDarkMode() {
            var body = document.body;
            body.classList.toggle('dark-mode');
        }

        // Function to toggle settings menu visibility
        function toggleSettings() {
            var settingsMenu = document.getElementById('settingsMenu');
            settingsMenu.style.display = (settingsMenu.style.display === 'block') ? 'none' : 'block';
        }

        // Function to change area
        function changeArea() {
            var areaSelect = document.getElementById('areaSelect');
            var selectedAreaId = parseInt(areaSelect.value);
            player.area = selectedAreaId;
            // Update game text
            var areaName = areas.find(area => area.id === selectedAreaId).name;
            updateGameText(`You move to ${areaName}.`);
        }

        // Function to update game text dynamically
        function updateGameText(text) {
            var gameText = document.getElementById('gameText');
            gameText.textContent = text;
        }

        // Function to initialize player traits at the start of the game
        function initializeTraits() {
            for (let i = 0; i < 5; i++) { // Roll traits initially
                let randomTrait = traits[Math.floor(Math.random() * traits.length)];
                player.traits.push(randomTrait);
            }
        }

        // Function to swap traits every 5 levels
        function swapTrait() {
            let randomTrait = traits[Math.floor(Math.random() * traits.length)];
            player.traits[player.currentTrait] = randomTrait;
            updateGameText(`You swap your trait to ${randomTrait.name}.`);
        }

        // Example of calling initializeTraits() at game start
        initializeTraits();

        // Initial game text
        updateGameText("Welcome to the Text RPG! Begin your adventure...");

        // Functions for game actions
        function explore() {
            var traitText = (player.traits.length > 0) ? ` with ${player.traits[player.currentTrait].name} trait.` : ".";
            updateGameText(`You explore the area${traitText}`);
        }

        function startFight() {
            var traitText = (player.traits.length > 0) ? ` with ${player.traits[player.currentTrait].name} trait.` : ".";
            updateGameText(`You start a fight${traitText}`);
        }

        function enterCity() {
            var traitText = (player.traits.length > 0) ? ` with ${player.traits[player.currentTrait].name} trait.` : ".";
            updateGameText(`You enter the city${traitText}`);
            player.city = true;
            // Show city options
            var cityMenu = document.getElementById('cityMenu');
            var cityOptions = document.getElementById('cityOptions');
            cityMenu.style.display = 'block';
            cityOptions.style.display = 'block';
        }

        function sellLoot() {
            var traitText = (player.traits.length > 0) ? ` with ${player.traits[player.currentTrait].name} trait.` : ".";
            updateGameText(`You sell your loot${traitText}`);
        }

        function buyItems() {
            var traitText = (player.traits.length > 0) ? ` with ${player.traits[player.currentTrait].name} trait.` : ".";
            updateGameText(`You buy items${traitText}`);
        }

        function learnSkills() {
            var traitText = (player.traits.length > 0) ? ` with ${player.traits[player.currentTrait].name} trait.` : ".";
            updateGameText(`You learn new skills${traitText}`);
        }

        function exploreCity() {
            var traitText = (player.traits.length > 0) ? ` with ${player.traits[player.currentTrait].name} trait.` : ".";
            updateGameText(`You explore the city${traitText}`);
        }

        function castSpell(spell) {
            var traitText = (player.traits.length > 0) ? ` with ${player.traits[player.currentTrait].name} trait.` : ".";
            updateGameText(`You cast ${spell} spell${traitText}`);
        }

        function useShield() {
            var traitText = (player.traits.length > 0) ? ` with ${player.traits[player.currentTrait].name} trait.` : ".";
            updateGameText(`You use your shield${traitText}`);
        }

        // Function to save game state (not implemented in this example)
        function saveGame() {
            alert("Game saved!");
        }

        // Function to change text size (not implemented in this example)
        function changeTextSize() {
            var textSizeSelect = document.getElementById('textSizeSelect');
            var selectedTextSize = textSizeSelect.value;
            // Implement change text size functionality here
        }
        function toggleSettings() {
            var settingsMenu = document.getElementById("settingsMenu");
            settingsMenu.style.display = (settingsMenu.style.display === "block") ? "none" : "block";
        }

        function toggleDarkMode() {
            var body = document.body;
            body.classList.toggle("dark-mode");
        }

        function changeTextSize() {
            var textSize = document.getElementById("textSizeSelect").value;
            var gameText = document.getElementById("gameText");

            switch (textSize) {
                case "normal":
                    gameText.style.fontSize = "16px";
                    break;
                case "large":
                    gameText.style.fontSize = "20px";
                    break;
                default:
                    break;
            }
        }

        function updateStats() {
            document.getElementById("health").textContent = player.health;
            document.getElementById("strength").textContent = player.strength;
            document.getElementById("magic").textContent = player.magic;
            document.getElementById("defense").textContent = player.defense;
            document.getElementById("gold").textContent = player.gold;
        }

        function updateInventory() {
            var inventoryList = document.getElementById("inventoryList");
            inventoryList.innerHTML = ""; // Clear existing list

            if (player.inventory.length === 0) {
                var newItem = document.createElement("li");
                newItem.textContent = "No items";
                inventoryList.appendChild(newItem);
            } else {
                player.inventory.forEach(function(item) {
                    var newItem = document.createElement("li");
                    newItem.textContent = item;
                    inventoryList.appendChild(newItem);
                });
            }
        }

        // Initialize the game
        updateStats();
        updateInventory();
        updateGameText("Welcome to the Text RPG! Begin your adventure...");
    </script>
</body>
</html>
